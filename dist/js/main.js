"use strict";var map,restaurants=void 0,neighborhoods=void 0,cuisines=void 0,markers=[];document.addEventListener("DOMContentLoaded",function(e){fetchNeighborhoods(),fetchCuisines()}),fetchNeighborhoods=function(){DBHelper.fetchNeighborhoods(function(e,n){e?console.error(e):(self.neighborhoods=n,fillNeighborhoodsHTML())})},fillNeighborhoodsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,t=document.getElementById("neighborhoods-select");e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})},fetchCuisines=function(){DBHelper.fetchCuisines(function(e,n){e?console.error(e):(self.cuisines=n,fillCuisinesHTML())})},fillCuisinesHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines,t=document.getElementById("cuisines-select");e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})},window.initMap=function(){self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),updateRestaurants()},updateRestaurants=function(){var e=document.getElementById("cuisines-select"),n=document.getElementById("neighborhoods-select"),t=e.selectedIndex,a=n.selectedIndex,r=e[t].value,o=n[a].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(r,o,function(e,n){e?console.error(e):(resetRestaurants(n),fillRestaurantsHTML())})},resetRestaurants=function(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers.forEach(function(e){return e.setMap(null)}),self.markers=[],self.restaurants=e},fillRestaurantsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,n=document.getElementById("restaurants-list");e.forEach(function(e){n.append(createRestaurantHTML(e))}),addMarkersToMap()},createRestaurantHTML=function(e){var n=document.createElement("li"),t="small",a=t;window.matchMedia("screen and (min-width: 1000px)")?a="medium":window.matchMedia("screen and (min-width: 600px)")&&(a=t);var r=document.createElement("img");r.className="restaurant-img lazyload",r.setAttribute("data-src",DBHelper.imageUrlForRestaurant(e,a)),r.alt=e.name+" resturant picture",10==e.id&&r.setAttribute("onload","lazyLoad()"),n.append(r);var o=document.createElement("h2");o.innerHTML=e.name,o.tabIndex=0,n.append(o);var s=document.createElement("p");s.innerHTML=e.neighborhood,s.tabIndex=0,n.append(s);var i=document.createElement("p");i.innerHTML=e.address,i.tabIndex=0,n.append(i);var l=document.createElement("a");return l.innerHTML="View Details",l.href=DBHelper.urlForRestaurant(e),n.append(l),n},addMarkersToMap=function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var n=DBHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(n,"click",function(){window.location.href=n.url}),self.markers.push(n)})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibmVpZ2hib3Job29kcyIsInJlc3RhdXJhbnRzIiwiY3Vpc2luZXMiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImZldGNoTmVpZ2hib3Job29kcyIsIkRCSGVscGVyIiwiZXJyb3IiLCJzZWxmIiwiY29uc29sZSIsImZpbGxOZWlnaGJvcmhvb2RzSFRNTCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInNlbGVjdCIsImdldEVsZW1lbnRCeUlkIiwiZm9yRWFjaCIsIm5laWdoYm9yaG9vZCIsImNyZWF0ZUVsZW1lbnQiLCJvcHRpb24iLCJ2YWx1ZSIsImZldGNoQ3Vpc2luZXMiLCJmaWxsQ3Vpc2luZXNIVE1MIiwiY3Vpc2luZSIsImlubmVySFRNTCIsIm1hcCIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJ6b29tIiwiY2VudGVyIiwiYXBwZW5kIiwibGF0IiwibG5nIiwid2luZG93Iiwic2Nyb2xsd2hlZWwiLCJjU2VsZWN0IiwidXBkYXRlUmVzdGF1cmFudHMiLCJjSW5kZXgiLCJzZWxlY3RlZEluZGV4IiwibkluZGV4IiwiblNlbGVjdCIsInJlc2V0UmVzdGF1cmFudHMiLCJtYXJrZXJzIiwibSIsInNldE1hcCIsImZpbGxSZXN0YXVyYW50c0hUTUwiLCJ1bCIsInJlc3RhdXJhbnQiLCJhZGRNYXJrZXJzVG9NYXAiLCJzbWFsbCIsIm1hdGNoTWVkaWEiLCJzaXplIiwiaW1hZ2UiLCJjcmVhdGVSZXN0YXVyYW50SFRNTCIsImltYWdlVXJsRm9yUmVzdGF1cmFudCIsIm1lZGl1bSIsIm5hbWUiLCJpZCIsImxpIiwidGFiSW5kZXgiLCJhZGRyZXNzIiwibW9yZSIsImhyZWYiLCJ1cmxGb3JSZXN0YXVyYW50IiwiYWRkTGlzdGVuZXIiLCJtYXJrZXIiLCJsb2NhdGlvbiIsInVybCIsInB1c2giXSwibWFwcGluZ3MiOiJhQUFBLElBQ0VBLElBREVDLGlCQUFBQSxFQUNGRCxtQkFBQUEs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RUFBS2pDLFVBQVl3QixFQUFXUyxLQUM1QkEsRUFBS0csU0FBVyxFQUNoQkQsRUFBRzVCLE9BQU8wQixHQUVWLElBQU14QyxFQUFlZixTQUFTZ0IsY0FBYyxLQUM1Q0QsRUFBYU8sVUFBWXdCLEVBQVcvQixhQVhwQ0EsRUFBQTJDLFNBQUEsRUFhQUQsRUFBRzVCLE9BQU9kLEdBVlYwQyxJQUFHNUIsRUFBSDdCLFNBQUFnQixjQUFBLEtBYUEyQyxFQUFRckMsVUFBWXdCLEVBQVdhLFFBWC9CQSxFQUFNSixTQUFPdkQsRUFDYnVELEVBQUFBLE9BQUtqQyxHQUVMbUMsSUFBRzVCLEVBQU8wQixTQUFWdkMsY0FBQSxLQUtBeUMsT0FRQUcsRUFBS3RDLFVBQVksZUFYakJzQyxFQUFNN0MsS0FBQUEsU0FBZWYsaUJBQVNnQixHQUM5QkQsRUFBQUEsT0FBQUEsR0FFR2MsR0FrQkxrQixnQkFBa0IsWUFBb0MsRUFBQXRDLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFyQkgsS0FBS1IsYUFYdkJFLFFBQVNnQixTQUFBQSxHQUV0QjRDLElBQUtDLEVBQU96RCxTQUFTMEQsdUJBQXJCaEIsRUFBQXhDLEtBQUFpQixLQUNBa0MsT0FBQWhDLEtBQUF2QixNQUFBNkQsWUFBQUMsRUFBQSxRQUFBLFdBYUloQyxPQUFPaUMsU0FBU0osS0FBT0csRUFBT0UsTUFsRXBDNUQsS0FBQW1DLFFBQUEwQixLQUFBSCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHJlc3RhdXJhbnRzLFxyXG4gIG5laWdoYm9yaG9vZHMsXHJcbiAgY3Vpc2luZXNcclxudmFyIG1hcFxyXG52YXIgbWFya2VycyA9IFtdXHJcblxyXG4vKipcclxuICogRmV0Y2ggbmVpZ2hib3Job29kcyBhbmQgY3Vpc2luZXMgYXMgc29vbiBhcyB0aGUgcGFnZSBpcyBsb2FkZWQuXHJcbiAqL1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKGV2ZW50KSA9PiB7XHJcbiAgZmV0Y2hOZWlnaGJvcmhvb2RzKCk7XHJcbiAgZmV0Y2hDdWlzaW5lcygpO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBhbGwgbmVpZ2hib3Job29kcyBhbmQgc2V0IHRoZWlyIEhUTUwuXHJcbiAqL1xyXG5mZXRjaE5laWdoYm9yaG9vZHMgPSAoKSA9PiB7XHJcbiAgREJIZWxwZXIuZmV0Y2hOZWlnaGJvcmhvb2RzKChlcnJvciwgbmVpZ2hib3Job29kcykgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvclxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYubmVpZ2hib3Job29kcyA9IG5laWdoYm9yaG9vZHM7XHJcbiAgICAgIGZpbGxOZWlnaGJvcmhvb2RzSFRNTCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IG5laWdoYm9yaG9vZHMgSFRNTC5cclxuICovXHJcbmZpbGxOZWlnaGJvcmhvb2RzSFRNTCA9IChuZWlnaGJvcmhvb2RzID0gc2VsZi5uZWlnaGJvcmhvb2RzKSA9PiB7XHJcbiAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25laWdoYm9yaG9vZHMtc2VsZWN0Jyk7XHJcbiAgbmVpZ2hib3Job29kcy5mb3JFYWNoKG5laWdoYm9yaG9vZCA9PiB7XHJcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgIG9wdGlvbi5pbm5lckhUTUwgPSBuZWlnaGJvcmhvb2Q7XHJcbiAgICBvcHRpb24udmFsdWUgPSBuZWlnaGJvcmhvb2Q7XHJcbiAgICBzZWxlY3QuYXBwZW5kKG9wdGlvbik7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBhbGwgY3Vpc2luZXMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxuZmV0Y2hDdWlzaW5lcyA9ICgpID0+IHtcclxuICBEQkhlbHBlci5mZXRjaEN1aXNpbmVzKChlcnJvciwgY3Vpc2luZXMpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2VsZi5jdWlzaW5lcyA9IGN1aXNpbmVzO1xyXG4gICAgICBmaWxsQ3Vpc2luZXNIVE1MKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgY3Vpc2luZXMgSFRNTC5cclxuICovXHJcbmZpbGxDdWlzaW5lc0hUTUwgPSAoY3Vpc2luZXMgPSBzZWxmLmN1aXNpbmVzKSA9PiB7XHJcbiAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1aXNpbmVzLXNlbGVjdCcpO1xyXG5cclxuICBjdWlzaW5lcy5mb3JFYWNoKGN1aXNpbmUgPT4ge1xyXG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gY3Vpc2luZTtcclxuICAgIG9wdGlvbi52YWx1ZSA9IGN1aXNpbmU7XHJcbiAgICBzZWxlY3QuYXBwZW5kKG9wdGlvbik7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIEdvb2dsZSBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXHJcbiAqL1xyXG53aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcclxuICBsZXQgbG9jID0ge1xyXG4gICAgbGF0OiA0MC43MjIyMTYsXHJcbiAgICBsbmc6IC03My45ODc1MDFcclxuICB9O1xyXG4gIHNlbGYubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcclxuICAgIHpvb206IDEyLFxyXG4gICAgY2VudGVyOiBsb2MsXHJcbiAgICBzY3JvbGx3aGVlbDogZmFsc2VcclxuICB9KTtcclxuICB1cGRhdGVSZXN0YXVyYW50cygpO1xyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIHBhZ2UgYW5kIG1hcCBmb3IgY3VycmVudCByZXN0YXVyYW50cy5cclxuICovXHJcbnVwZGF0ZVJlc3RhdXJhbnRzID0gKCkgPT4ge1xyXG4gIGNvbnN0IGNTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0Jyk7XHJcbiAgY29uc3QgblNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xyXG5cclxuICBjb25zdCBjSW5kZXggPSBjU2VsZWN0LnNlbGVjdGVkSW5kZXg7XHJcbiAgY29uc3QgbkluZGV4ID0gblNlbGVjdC5zZWxlY3RlZEluZGV4O1xyXG5cclxuICBjb25zdCBjdWlzaW5lID0gY1NlbGVjdFtjSW5kZXhdLnZhbHVlO1xyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IG5TZWxlY3RbbkluZGV4XS52YWx1ZTtcclxuXHJcbiAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kKGN1aXNpbmUsIG5laWdoYm9yaG9vZCwgKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXNldFJlc3RhdXJhbnRzKHJlc3RhdXJhbnRzKTtcclxuICAgICAgZmlsbFJlc3RhdXJhbnRzSFRNTCgpO1xyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGVhciBjdXJyZW50IHJlc3RhdXJhbnRzLCB0aGVpciBIVE1MIGFuZCByZW1vdmUgdGhlaXIgbWFwIG1hcmtlcnMuXHJcbiAqL1xyXG5yZXNldFJlc3RhdXJhbnRzID0gKHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgLy8gUmVtb3ZlIGFsbCByZXN0YXVyYW50c1xyXG4gIHNlbGYucmVzdGF1cmFudHMgPSBbXTtcclxuICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50cy1saXN0Jyk7XHJcbiAgdWwuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gIC8vIFJlbW92ZSBhbGwgbWFwIG1hcmtlcnNcclxuICBzZWxmLm1hcmtlcnMuZm9yRWFjaChtID0+IG0uc2V0TWFwKG51bGwpKTtcclxuICBzZWxmLm1hcmtlcnMgPSBbXTtcclxuICBzZWxmLnJlc3RhdXJhbnRzID0gcmVzdGF1cmFudHM7XHJcbn1cclxuXHJcbi8qanNoaW50IGVzdmVyc2lvbjogNiAqL1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhbGwgcmVzdGF1cmFudHMgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXHJcbiAqL1xyXG5maWxsUmVzdGF1cmFudHNIVE1MID0gKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykgPT4ge1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgdWwuYXBwZW5kKGNyZWF0ZVJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQpKTtcclxuICB9KTtcclxuICBhZGRNYXJrZXJzVG9NYXAoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwuXHJcbiAqL1xyXG5jcmVhdGVSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50KSA9PiB7XHJcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gIGNvbnN0IHNtYWxsID0gJ3NtYWxsJywgbWVkaXVtID0gJ21lZGl1bScsIGJpZyA9ICdiaWcnO1xyXG4gIGxldCBzaXplID0gc21hbGw7XHJcbiAgLy9jb25zdCB3c21hbGwgPSAnMzUwdycsIHdtZWRpdW0gPSAnNTUwdycsIGJpZyA9ICc4MDB3JztcclxuXHJcbiAgaWYod2luZG93Lm1hdGNoTWVkaWEoJ3NjcmVlbiBhbmQgKG1pbi13aWR0aDogMTAwMHB4KScpKVxyXG4gICAgc2l6ZSA9IG1lZGl1bTtcclxuICBlbHNlIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnc2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MDBweCknKSlcclxuICAgIHNpemUgPSBzbWFsbDtcclxuXHJcbiAgLy9jb25zdCBwaWN0dXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncGljdHVyZScpO1xyXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nIGxhenlsb2FkJztcclxuICAvL2ltYWdlLnNyYyA9ICcnO1xyXG4gIGltYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS1zcmMnLCBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgc2l6ZSkpO1xyXG4gIGltYWdlLmFsdCA9IHJlc3RhdXJhbnQubmFtZSArICcgcmVzdHVyYW50IHBpY3R1cmUnO1xyXG4gIGlmKHJlc3RhdXJhbnQuaWQgPT0gMTApe1xyXG4gICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCdvbmxvYWQnLCAnbGF6eUxvYWQoKScpO1xyXG4gIH1cclxuICAvKmltYWdlLnNyY3NldCA9IGAke0RCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBzbWFsbCl9ICR7d3NtYWxsfSxcclxuICAgICAgICAgICAgICAgICAgICAke0RCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBtZWRpdW0pfSAke3dtZWRpdW19LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAke0RCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBiaWcpfSAke3diaWd9YDsqL1xyXG4gIC8qY29uc3Qgc291cmNlMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NvdXJjZScpO1xyXG4gIHNvdXJjZTEubWVkaWEgPSBcInNjcmVlbiBhbmQgKG1pbi13aWR0aDogNjAwcHgpXCI7XHJcbiAgc291cmNlMS5zcmNzZXQgPSBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgbWVkaXVtKTtcclxuICBjb25zdCBzb3VyY2UyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XHJcbiAgc291cmNlMi5tZWRpYSA9IFwic2NyZWVuIGFuZCAobWluLXdpZHRoOiAxMDAwcHgpXCI7XHJcbiAgc291cmNlMi5zcmNzZXQgPSBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgYmlnKTsqL1xyXG4gIFxyXG4gIC8qcGljdHVyZS5hcHBlbmRDaGlsZChpbWFnZSk7XHJcbiAgcGljdHVyZS5hcHBlbmRDaGlsZChzb3VyY2UxKTtcclxuICBwaWN0dXJlLmFwcGVuZENoaWxkKHNvdXJjZTIpOyovICAgICAgICAgICAgICAgICAgICAgIFxyXG4gIGxpLmFwcGVuZChpbWFnZSk7XHJcblxyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xyXG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xyXG4gIG5hbWUudGFiSW5kZXggPSAwO1xyXG4gIGxpLmFwcGVuZChuYW1lKTtcclxuXHJcbiAgY29uc3QgbmVpZ2hib3Job29kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gIG5laWdoYm9yaG9vZC5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5laWdoYm9yaG9vZDtcclxuICBuZWlnaGJvcmhvb2QudGFiSW5kZXggPSAwO1xyXG4gIGxpLmFwcGVuZChuZWlnaGJvcmhvb2QpO1xyXG5cclxuICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gIGFkZHJlc3MuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5hZGRyZXNzO1xyXG4gIGFkZHJlc3MudGFiSW5kZXggPSAwO1xyXG4gIGxpLmFwcGVuZChhZGRyZXNzKTtcclxuXHJcbiAgY29uc3QgbW9yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICBtb3JlLmlubmVySFRNTCA9ICdWaWV3IERldGFpbHMnO1xyXG4gIG1vcmUuaHJlZiA9IERCSGVscGVyLnVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XHJcbiAgbGkuYXBwZW5kKG1vcmUpXHJcblxyXG4gIHJldHVybiBsaVxyXG59XHJcblxyXG4vKipcclxuICogQWRkIG1hcmtlcnMgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMgdG8gdGhlIG1hcC5cclxuICovXHJcbmFkZE1hcmtlcnNUb01hcCA9IChyZXN0YXVyYW50cyA9IHNlbGYucmVzdGF1cmFudHMpID0+IHtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgLy8gQWRkIG1hcmtlciB0byB0aGUgbWFwXHJcbiAgICBjb25zdCBtYXJrZXIgPSBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIHNlbGYubWFwKTtcclxuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1hcmtlci51cmxcclxuICAgIH0pO1xyXG4gICAgc2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICB9KTtcclxufVxyXG4iXX0=

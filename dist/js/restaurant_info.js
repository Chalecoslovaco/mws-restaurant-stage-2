"use strict";var map,restaurant=void 0;window.initMap=function(){fetchRestaurantFromURL(function(e,n){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:n.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})},fetchRestaurantFromURL=function(t){if(self.restaurant)t(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,n){(self.restaurant=n)?(fillRestaurantHTML(),t(null,n)):console.error(e)}):(error="No restaurant id in URL",t(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,n=document.getElementById("restaurant-name");n.innerHTML=e.name,n.tabIndex=0;var t=document.getElementById("restaurant-address");t.innerHTML=e.address,t.tabIndex=0;var a="small",r=a,d=document.getElementById("restaurant-img");window.matchMedia("screen and (min-width: 1000px)")?r="medium":window.matchMedia("screen and (min-width: 600px)")&&(r=a),d.className="restaurant-img lazyload",d.setAttribute("data-src",DBHelper.imageUrlForRestaurant(e,r)),d.alt=e.name+" resturant picture";var i=document.getElementById("restaurant-cuisine");i.innerHTML=e.cuisine_type,i.tabIndex=0,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,n=document.getElementById("restaurant-hours");for(var t in e){var a=document.createElement("tr");a.tabIndex=0;var r=document.createElement("td");r.innerHTML=t,a.appendChild(r);var d=document.createElement("td");d.innerHTML=e[t],a.appendChild(d),n.appendChild(a)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,n=document.getElementById("reviews-container"),t=document.createElement("h3");if(t.innerHTML="Reviews",t.tabIndex=0,n.appendChild(t),!e){var a=document.createElement("p");return a.innerHTML="No reviews yet!",void n.appendChild(a)}var r=document.getElementById("reviews-list");e.forEach(function(e){r.appendChild(createReviewHTML(e))}),n.appendChild(r)},createReviewHTML=function(e){var n=document.createElement("li"),t=document.createElement("p");t.innerHTML=e.name,t.tabIndex=0,n.appendChild(t);var a=document.createElement("p");a.innerHTML=e.date,a.tabIndex=0,n.appendChild(a);var r=document.createElement("p");r.innerHTML="Rating: "+e.rating,r.tabIndex=0,n.appendChild(r);var d=document.createElement("p");return d.innerHTML=e.comments,d.tabIndex=0,n.appendChild(d),n},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,n=document.getElementById("breadcrumb"),t=document.createElement("li");t.innerHTML=e.name,n.appendChild(t)},getParameterByName=function(e,n){n||(n=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(n);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJtYXAiLCJyZXN0YXVyYW50Iiwid2luZG93IiwiaW5pdE1hcCIsImZldGNoUmVzdGF1cmFudEZyb21VUkwiLCJlcnJvciIsInNlbGYiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnNvbGUiLCJjZW50ZXIiLCJsYXRsbmciLCJzY3JvbGx3aGVlbCIsImNhbGxiYWNrIiwiaWQiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJEQkhlbHBlciIsImZldGNoUmVzdGF1cmFudEJ5SWQiLCJmaWxsUmVzdGF1cmFudEhUTUwiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJuYW1lIiwiaW5uZXJIVE1MIiwidGFiSW5kZXgiLCJhZGRyZXNzIiwiaW1hZ2UiLCJtYXRjaE1lZGlhIiwic2l6ZSIsInNtYWxsIiwiYmlnIiwiaW1hZ2VVcmxGb3JSZXN0YXVyYW50IiwiYWx0IiwiY3Vpc2luZSIsImNsYXNzTmFtZSIsImN1aXNpbmVfdHlwZSIsIm9wZXJhdGluZ19ob3VycyIsImZpbGxSZXN0YXVyYW50SG91cnNIVE1MIiwiZmlsbFJldmlld3NIVE1MIiwiaG91cnMiLCJrZXkiLCJvcGVyYXRpbmdIb3VycyIsInJvdyIsImNyZWF0ZUVsZW1lbnQiLCJkYXkiLCJhcHBlbmRDaGlsZCIsInRpbWUiLCJyZXZpZXdzIiwidGl0bGUiLCJjb250YWluZXIiLCJub1Jldmlld3MiLCJyZXZpZXciLCJ1bCIsImNyZWF0ZVJldmlld0hUTUwiLCJmb3JFYWNoIiwibGkiLCJkYXRlIiwicmF0aW5nIiwiY29tbWVudHMiLCJicmVhZGNydW1iIiwiZmlsbEJyZWFkY3J1bWIiLCJ1cmwiLCJsb2NhdGlvbiIsImhyZWYiLCJyZXN1bHRzIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicmVwbGFjZSJdLCJtYXBwaW5ncyI6ImFBQUEsSUFHSUEsSUFISkMsZ0JBQUFBLEVBUUFDLE9BQU9D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LFNBQVFYLGNBQVUsTUFDckJFLEVBQUFBLFNBQVlRLGNBQWlCRixLQUNqQzdCLEVBRkRDLFVBQUE0QixFQUFBN0IsS0FHQTJCLEVBQUFBLFNBQVVKLEVBakJaVSxFQUFBVixZQUFBdkIsR0FvQkEsSUFBQWtDLEVBQUFqRCxTQUFBb0MsY0FBQSxLQVdFYSxFQUFLakMsVUFBWTRCLEVBQU9LLEtBQ3hCQSxFQUFLaEMsU0FBVyxFQVRsQjZCLEVBQUFBLFlBQUFBLEdBRUUsSUFBTS9CLEVBQU9mLFNBQVNvQyxjQUF0QixLQUNBckIsRUFBS0MsVUFBTEQsV0FBQTZCLEVBQUFNLE9BQ0FuQyxFQUFLRSxTQUFMLEVBQ0ErQixFQUFHVixZQUFZdkIsR0FFZixJQUFNa0MsRUFBT2pELFNBQVNvQyxjQUF0QixLQUtBLE9BSkFhLEVBQUtqQyxVQUFZNEIsRUFBakJPLFNBQ0FGLEVBQUtoQyxTQUFMLEVBQ0ErQixFQUFHVixZQUFZVyxHQUVUQyxHQU1OQyxlQUFTbkMsV0FBVCxJQUFTQSxFQUFULEVBQUFKLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFxQmdDLEtBQU9PLFdBQzVCQSxFQUFBbkQsU0FBQUMsZUFBQSxjQUNHcUMsRUFBQUEsU0FBWWEsY0FBZixNQVdBSCxFQUFHaEMsVUFBWXpCLEVBQVd3QixLQVQxQnFDLEVBQUFkLFlBQUFVLElBTUZLLG1CQUFpQixTQUFBdEMsRUFBQXVDLEdBQUMvRCxJQVlkK0QsRUFBTTlELE9BQU8rRCxTQUFTQyxNQVh4QnpDLEVBQU1xQyxFQUFBQSxRQUFhcEQsVUFBU0MsUUFDNUIsSUFDQStDLEVBRFdoRCxJQUFTb0MsT0FBVHBDLE9BQXVCZSxFQUF2QmYscUJBQ0lULEtBQUFBLEdBQ2Y2RCxPQUFBQSxFQWNLSyxFQUFRLEdBRU5DLG1CQUFtQkQsRUFBUSxHQUFHRSxRQUFRLE1BQU8sTUFidEQsR0FQQSIsImZpbGUiOiJyZXN0YXVyYW50X2luZm8uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmpzaGludCBlc3ZlcnNpb246IDYgKi9cblxubGV0IHJlc3RhdXJhbnQ7XG52YXIgbWFwO1xuXG4vKipcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cbiAqL1xud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XG4gIGZldGNoUmVzdGF1cmFudEZyb21VUkwoKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG4gICAgICAgIHpvb206IDE2LFxuICAgICAgICBjZW50ZXI6IHJlc3RhdXJhbnQubGF0bG5nLFxuICAgICAgICBzY3JvbGx3aGVlbDogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgZmlsbEJyZWFkY3J1bWIoKTtcbiAgICAgIERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQoc2VsZi5yZXN0YXVyYW50LCBzZWxmLm1hcCk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgY3VycmVudCByZXN0YXVyYW50IGZyb20gcGFnZSBVUkwuXG4gKi9cbmZldGNoUmVzdGF1cmFudEZyb21VUkwgPSAoY2FsbGJhY2spID0+IHtcbiAgaWYgKHNlbGYucmVzdGF1cmFudCkgeyAvLyByZXN0YXVyYW50IGFscmVhZHkgZmV0Y2hlZCFcbiAgICBjYWxsYmFjayhudWxsLCBzZWxmLnJlc3RhdXJhbnQpXG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGlkID0gZ2V0UGFyYW1ldGVyQnlOYW1lKCdpZCcpO1xuICBpZiAoIWlkKSB7IC8vIG5vIGlkIGZvdW5kIGluIFVSTFxuICAgIGVycm9yID0gJ05vIHJlc3RhdXJhbnQgaWQgaW4gVVJMJ1xuICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgfSBlbHNlIHtcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCAoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcbiAgICAgIHNlbGYucmVzdGF1cmFudCA9IHJlc3RhdXJhbnQ7XG4gICAgICBpZiAoIXJlc3RhdXJhbnQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZpbGxSZXN0YXVyYW50SFRNTCgpO1xuICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudClcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZVxuICovXG5maWxsUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtbmFtZScpO1xuICBuYW1lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcbiAgbmFtZS50YWJJbmRleCA9IDA7XG5cbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWFkZHJlc3MnKTtcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XG4gIGFkZHJlc3MudGFiSW5kZXggPSAwO1xuXG4gIGNvbnN0IHNtYWxsID0gJ3NtYWxsJywgbWVkaXVtID0gJ21lZGl1bScsIGJpZyA9ICdiaWcnO1xuICBsZXQgc2l6ZSA9IHNtYWxsO1xuICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWltZycpO1xuXG4gIGlmKHdpbmRvdy5tYXRjaE1lZGlhKCdzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEwMDBweCknKSlcbiAgICBzaXplID0gbWVkaXVtO1xuICBlbHNlIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnc2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MDBweCknKSlcbiAgICBzaXplID0gc21hbGw7XG4gICAgXG4gIGltYWdlLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWltZyBsYXp5bG9hZCdcbiAgLy9pbWFnZS5zcmMgPSAnJztcbiAgaW1hZ2Uuc2V0QXR0cmlidXRlKCdkYXRhLXNyYycsIERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBzaXplKSk7XG4gIGltYWdlLmFsdCA9IHJlc3RhdXJhbnQubmFtZSArICcgcmVzdHVyYW50IHBpY3R1cmUnO1xuXG4gIGNvbnN0IGN1aXNpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1jdWlzaW5lJyk7XG4gIGN1aXNpbmUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5jdWlzaW5lX3R5cGU7XG4gIGN1aXNpbmUudGFiSW5kZXggPSAwO1xuXG4gIC8vIGZpbGwgb3BlcmF0aW5nIGhvdXJzXG4gIGlmIChyZXN0YXVyYW50Lm9wZXJhdGluZ19ob3Vycykge1xuICAgIGZpbGxSZXN0YXVyYW50SG91cnNIVE1MKCk7XG4gIH1cbiAgLy8gZmlsbCByZXZpZXdzXG4gIGZpbGxSZXZpZXdzSFRNTCgpO1xufVxuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IG9wZXJhdGluZyBob3VycyBIVE1MIHRhYmxlIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmZpbGxSZXN0YXVyYW50SG91cnNIVE1MID0gKG9wZXJhdGluZ0hvdXJzID0gc2VsZi5yZXN0YXVyYW50Lm9wZXJhdGluZ19ob3VycykgPT4ge1xuICBjb25zdCBob3VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWhvdXJzJyk7XG4gIGZvciAobGV0IGtleSBpbiBvcGVyYXRpbmdIb3Vycykge1xuICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgcm93LnRhYkluZGV4ID0gMDsgXG5cbiAgICBjb25zdCBkYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgIGRheS5pbm5lckhUTUwgPSBrZXk7XG4gICAgcm93LmFwcGVuZENoaWxkKGRheSk7XG5cbiAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICB0aW1lLmlubmVySFRNTCA9IG9wZXJhdGluZ0hvdXJzW2tleV07XG4gICAgcm93LmFwcGVuZENoaWxkKHRpbWUpO1xuXG4gICAgaG91cnMuYXBwZW5kQ2hpbGQocm93KTtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhbGwgcmV2aWV3cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cbiAqL1xuZmlsbFJldmlld3NIVE1MID0gKHJldmlld3MgPSBzZWxmLnJlc3RhdXJhbnQucmV2aWV3cykgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1jb250YWluZXInKTtcbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICB0aXRsZS5pbm5lckhUTUwgPSAnUmV2aWV3cyc7XG4gIHRpdGxlLnRhYkluZGV4ID0gMDtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICBpZiAoIXJldmlld3MpIHtcbiAgICBjb25zdCBub1Jldmlld3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgbm9SZXZpZXdzLmlubmVySFRNTCA9ICdObyByZXZpZXdzIHlldCEnO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChub1Jldmlld3MpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWxpc3QnKTtcbiAgcmV2aWV3cy5mb3JFYWNoKHJldmlldyA9PiB7XG4gICAgdWwuYXBwZW5kQ2hpbGQoY3JlYXRlUmV2aWV3SFRNTChyZXZpZXcpKTtcbiAgfSk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh1bCk7XG59XG5cbi8qKlxuICogQ3JlYXRlIHJldmlldyBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmNyZWF0ZVJldmlld0hUTUwgPSAocmV2aWV3KSA9PiB7XG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZTtcbiAgbmFtZS50YWJJbmRleCA9IDA7XG4gIGxpLmFwcGVuZENoaWxkKG5hbWUpO1xuXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIGRhdGUuaW5uZXJIVE1MID0gcmV2aWV3LmRhdGU7XG4gIGRhdGUudGFiSW5kZXggPSAwO1xuICBsaS5hcHBlbmRDaGlsZChkYXRlKTtcblxuICBjb25zdCByYXRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIHJhdGluZy5pbm5lckhUTUwgPSBgUmF0aW5nOiAke3Jldmlldy5yYXRpbmd9YDtcbiAgcmF0aW5nLnRhYkluZGV4ID0gMDtcbiAgbGkuYXBwZW5kQ2hpbGQocmF0aW5nKTtcblxuICBjb25zdCBjb21tZW50cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgY29tbWVudHMuaW5uZXJIVE1MID0gcmV2aWV3LmNvbW1lbnRzO1xuICBjb21tZW50cy50YWJJbmRleCA9IDA7XG4gIGxpLmFwcGVuZENoaWxkKGNvbW1lbnRzKTtcblxuICByZXR1cm4gbGk7XG59XG5cbi8qKlxuICogQWRkIHJlc3RhdXJhbnQgbmFtZSB0byB0aGUgYnJlYWRjcnVtYiBuYXZpZ2F0aW9uIG1lbnVcbiAqL1xuZmlsbEJyZWFkY3J1bWIgPSAocmVzdGF1cmFudD1zZWxmLnJlc3RhdXJhbnQpID0+IHtcbiAgY29uc3QgYnJlYWRjcnVtYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhZGNydW1iJyk7XG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgbGkuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuICBicmVhZGNydW1iLmFwcGVuZENoaWxkKGxpKTtcbn1cblxuLyoqXG4gKiBHZXQgYSBwYXJhbWV0ZXIgYnkgbmFtZSBmcm9tIHBhZ2UgVVJMLlxuICovXG5nZXRQYXJhbWV0ZXJCeU5hbWUgPSAobmFtZSwgdXJsKSA9PiB7XG4gIGlmICghdXJsKVxuICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXFxdXS9nLCAnXFxcXCQmJyk7XG4gIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgWz8mXSR7bmFtZX0oPShbXiYjXSopfCZ8I3wkKWApLFxuICAgIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7XG4gIGlmICghcmVzdWx0cylcbiAgICByZXR1cm4gbnVsbDtcbiAgaWYgKCFyZXN1bHRzWzJdKVxuICAgIHJldHVybiAnJztcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcbn1cbiJdfQ==
